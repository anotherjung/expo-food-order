# Backend Products CRUD

superbase, table editor, new table, products
new columns, name, image, price
- create policy

app/(user)/menu/index.tsx
- useEffect, fetchProducts

npm i @tanstack/react-query

npx expo prebuild --platform android

npx expo run:android --device

touch providers/QueryProvider.tsx

providers/QueryProvider.tsx

app/_layout.tsx
- import QueryProvider from '@/providers/QueryProvider';
-  <AuthProvider>  <QueryProvider> <CartProvider>

## product list

app/(user)/menu/index.tsx
- const {data, isLoading, error } = useQuery<Product[]>({ ...
- FlatList data={data}

mkdir api && mkdir api/products && touch api/products/index.ts

api/products/index.ts
- return useQuery<Product[]>({ ...

app/(user)/menu/index.tsx
- import { useProductList } from '@/api/products'
-   const { data: products, error, isLoading } = useProductList();
- FlatList   data={products
- isloading, error

app/(admin)/menu/index.tsx
- import { useProductList } from '@/api/products'
-   const { data: products, error, isLoading } = useProductList();
- FlatList   data={products
- isloading, error

## product id

api/products/index.ts
- export const useProduct = (id:number) => { ...

app/(user)/menu/[id].tsx
- import { useProduct } from '@/api/products';
-   const { data: product, error, isLoading } = useProduct(id);
-   const { id: idString } = useLocalSearchParams();
-   const id = parseFloat(typeof idString === 'string' ? idString : idString[0]);
- Stack.Screen options={{ title: product?.name || "name"}} 

## product id create

api/products/index.ts
- useMutation
- export const useInsertProduct = () => {

app/(admin)/menu/create.tsx
-   useInsertProduct,
-    const { mutate: insertProduct } = useInsertProduct();
-  insertProduct( { name, price: parseFloat(price), image },

superbase, table, products
- policy auth all operations

## product id update

api/products/index.ts
- export const useUpdateProduct = () => {

app/(admin)/menu/create.tsx
- useUpdateProduct,   useProduct,
- const { mutate: updateProduct } = useUpdateProduct();
- const { data: updatingProduct } = useProduct(id);
- useEffect(() => { if (updatingProduct) {

## product id delete

api/products/index.ts
- export const useDeleteProduct = () => {

app/(admin)/menu/create.tsx
-   useDeleteProduct,
-   const { mutate: deleteProduct } = useDeleteProduct();
-   const onDelete = () => {
-    deleteProduct(id, {